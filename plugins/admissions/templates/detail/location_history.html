<div ng-if="view === 'location_history'">
  <div class="col-md-12" patient-api target="location_histories" endpoint="location_history">
    <div class="panel panel-default">
      <div class="panel-heading">
        <div class="row">
          <div class="col-md-9">
            <h3>
              <i class="fa fa-hospital-o"></i>
              Location History
            </h3>
          </div>
        </div>
      </div>
      <div class="panel-body">
        <div class="row" ng-repeat="location_history in location_histories">
          <div class="col-md-12">
            <h4 ng-repeat="title in [location_history.title]">
              [[ title.transfer_start_datetime | displayDate ]]
              <span ng-show="title.transfer_end_datetime">- [[ title.transfer_end_datetime | displayDate ]]</span>
              <span ng-show="title.duration">([[ title.duration ]])</span>
              <small>
                <span ng-show='title.spell_number'>
                  Spell number: [[ title.spell_number ]]
                </span>
                Encounter ID: [[ title.encounter_id ]]
              </small>
            </h4>
            <table class="table table-bordered table-striped">
              <tr>
                <th class="col-xs-1">Seq #</th>
                <th class="col-xs-1">Start</th>
                <th class="col-xs-1">End</th>
                <th class="col-xs-2">Duration</th>
                <th class="col-xs-1">Location code</th>
                <th class="col-xs-1">Hospital</th>
                <th class="col-xs-1">Unit</th>
                <th class="col-xs-1">Room</th>
                <th class="col-xs-1">Bed</th>
                <th class="col-xs-2">Reason</th>
              </tr>
              <tr ng-repeat='row in location_history.table_data'>
                <td>[[ row.transfer_sequence_number ]]</td>
                <td>[[ row.transfer_start_datetime | displayDateTime  ]]</td>
                <td ng-class="{'text-warning': row.transfer_end_datetime && !(row.transfer_end_datetime | past:true) }">
                  [[ row.transfer_end_datetime | displayDateTime ]]
                </td>
                <td>
                  <span ng-show='row.duration'>[[ row.duration ]]</span>
                </td>
                <td>
                  <span ng-show="row.transfer_location_code">
                    <a href="/#/admissions/location-history/[[ row.transfer_location_code ]]">
                      [[ row.transfer_location_code ]]</td>
                    </a>
                  </span>
                <td>[[ row.hospital ]]</td>
                <td>[[ row.unit ]]</td>
                <td>[[ row.room ]]</td>
                <td>[[ row.bed ]]</td>
                <td>[[ row.transfer_reason ]]</td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
