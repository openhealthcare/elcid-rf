{% extends 'ipc/base.html' %}
{% load ipc %}
{% block content %}
<div class="panel panel-default">
  <div class="panel-heading">
    <h1>
      <a href="/#/admissions/bedboard/hospital/[[ patients[0].hospital_site_description ]]/" class="orange-link">
        [[ patients[0].hospital_site_description ]]
      </a>
      [[ ward_name ]]
      <span>
        ([[ patients.length ]] patients)
      </span>
    </h1>
  </div>
  <table class="table table-striped">
    <tr>
      <th>Room</th>
      <th>Bed</th>
      <th>Status</th>
      <th>MRN</th>
      <th>Name</th>
      <th>DOB</th>
      <th>Admitted</th>
      <th>IPC Comments</th>
      <th>Isolated</th>
    </tr>
    <tr ng-repeat="patient in patients">
      <td>[[ patient.room ]]</td>
      <td>[[ patient.bed ]]</td>
      <td>[[ patient.bed_status ]]</td>
      <td>
        <a ng-show="patient.local_patient_identifier " class="orange-link" href="/#/patient/[[ patient.patient_id ]]/">[[ patient.local_patient_identifier ]]</a>
      </td>
      <td>
        <a ng-show="patient.patient_name" class="orange-link" href="/#/patient/[[ patient.patient_id ]]/">[[ patient.patient_name ]]</a>
      </td>
      <td>
        <a ng-show="patient.date_of_birth" class="orange-link" href="/#/patient/[[ patient.patient_id ]]/">[[ patient.date_of_birth ]]</a>
      </td>
      <td>
        <span ng-show="patient.admission_date_time">
          [[ patient.admission_date_time | displayDateTime ]]
        </span>
      </td>
      <td>
        <span ng-show="patient.comments">
          [[ patient.comments | markdown ]]
        </span>
      </td>
      <td>
        <button class="btn btn-default" ng-click="isolate(patient, true)" ng-hide="patient.in_isolation">
          Mark as isolation
        </button>
        <button class="btn btn-primary" ng-click="isolate(patient, false)" ng-show="patient.in_isolation">
          Marked as isolation
        </button>
      </td>
    </tr>
  </table>

</div> <!-- Panel -->
{% endblock %}
