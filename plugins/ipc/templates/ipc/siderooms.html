{% extends 'ipc/base.html' %}
{% load ipc %}
{% block content %}
<div class="panel panel-default">
  <div class="panel-heading">
    <h1>
      Side Rooms: Royal Free Hospital
      <span>
        ({{ patients|length }} patients)
      </span>
    </h1>
  </div>
  <table class="table table-striped">
    <tr>
      <th>Ward</th>
      <th>Room</th>
      <th>Bed</th>
      <th>MRN</th>
      <th>Name</th>
      <th>DOB</th>
      <th>Admitted</th>
      <th>Alerts</th>
    </tr>
    {% for patient in patients %}
    <tr>
      <td>
        <a href="/#/ipc/ward/{{ patient.ward | slugify }}/" class="orange-link">
          {{ patient.ward }}
        </a>
      </td>
      <td>{{ patient.room }}</td>
      <td>{{ patient.bed }}</td>
      {% with patient.patient.demographics as demographics %}
      <td>
        <a class="orange-link" href="/#/patient/{{ demographics.patient_id }}">{{ demographics.hospital_number }}</a>
      </td>
      <td>
        <a class="orange-link" href="/#/patient/{{ demographics.patient_id }}">{{ demographics.name }}</a>
      </td>
      <td>
        <a class="orange-link" href="/#/patient/{{ demographics.patient_id }}">{{ demographics.date_of_birth }}</a>
      </td>
      {% endwith %}
      <td>{{ patient.admitted }}</td>
      <td>
        {% location_alerts patient %}
      </td>
    </tr>
    {% endfor %}

  </table>
</div> <!-- Panel -->
{% endblock %}
