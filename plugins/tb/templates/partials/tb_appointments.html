<div class="panel panel-default">
  <div class="panel-heading">
    <h3><i class="fa fa-calendar"></i> TB Appointments</h3>
  </div>
  <div patient-api target="tb_appointments" endpoint="tb_appointments" class="panel-footer">
    <div ng-show="tb_appointments.next_appointment">
      <strong>Next Appointment</strong><br>
      <div class="tb-appointment-date">
        [[ tb_appointments.next_appointment.start_datetime | displayDate ]]
      </div>
      [[ tb_appointments.next_appointment.derived_appointment_type ]]
      [[ tb_appointments.next_appointment.derived_clinic_resource ]]
    </div>
    <div ng-show="tb_appointments.todays_appointments.length">
      <strong>Today's Appointment<span ng-show="tb_appointments.todays_appointments.length > 1">s</span></strong>
      <span ng-repeat="tb_appointment in tb_appointments.todays_appointments track by $index">
      <br>
      <div class="tb-appointment-date">
      [[ tb_appointment.start_datetime | displayDate ]]
      </div>
      [[ tb_appointment.derived_appointment_type ]]
      [[ tb_appointment.derived_clinic_resource ]]
      [[ tb_appointment.status_code ]]
      </span>
    </div>
    <div ng-show="tb_appointments.last_appointments.length">
      <strong>Last Appointment<span ng-show="tb_appointments.last_appointments.length > 1">s</span></strong>
      <span ng-repeat="tb_appointment in tb_appointments.last_appointments track by $index">
        <br>
        <div class="tb-appointment-date">
        [[ tb_appointment.start_datetime | displayDate ]]
        </div>
        [[ tb_appointment.derived_appointment_type ]]
        [[ tb_appointment.derived_clinic_resource ]]
        <span ng-show="tb_appointment.status_code !== 'Checked In' && tb_appointment.status_code !== 'Checked Out'">
          [[ tb_appointment.status_code ]]
        </span>
      </span>
    </div>
  </div>
</div>
